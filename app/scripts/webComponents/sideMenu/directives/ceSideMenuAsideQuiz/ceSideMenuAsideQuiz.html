<md-list>

  <md-subheader class="md-no-sticky">Quiz Settings</md-subheader>

  <md-list-item layout>
    <md-button menu-close
               flex ng-disabled="true">
      <span class="ce-menu-button-text">Quiz Info</span>
    </md-button>
  </md-list-item>

  <md-divider></md-divider>

  <md-list-item layout>
    <md-button flex
               class="md-warn"
               ng-click="vm.reload()">
            <span class="ce-menu-button-text"
                  nav-transition="none"
                  menu-close>
              reload
            </span>
    </md-button>
  </md-list-item>


  <div ng-repeat="question in vm.questions">

    <md-subheader class="md-no-sticky">{{question.name}}</md-subheader>

    <md-divider></md-divider>

    <div ng-repeat="stage in question.stages">


      <md-list-item layout
                    layout-align="space-between"
                    layout-margin
                    layout-padding
                    ng-if="stage.name === 'exploration stage'"
                    ng-class="{'ce-list-item-active':stage.isActive}">

        <md-button flex
                   ui-sref="{{stage.link}}"
                   ng-click="vm.activateStage(stage)">
            <span class="ce-menu-button-text"
                  menu-close
                  nav-transition="none">
              {{stage.name}}
            </span>
        </md-button>

      </md-list-item>


      <md-list-item layout
                    ng-class="{'ce-list-item-active':vm.isStageShown(stage)}"
                    ng-if="stage.name !== 'exploration stage'">
        <md-button flex
                   ng-click="vm.toggleStage(stage)">
            <span class="ce-menu-button-text"
                  nav-transition="none">
              {{stage.name}}
            </span>
        </md-button>
      </md-list-item>

      <md-divider></md-divider>

      <md-list-item layout
                    layout-align="space-between"
                    ng-repeat="subStage in stage.subStages"
                    ng-if="stage.name !== 'exploration stage'"
                    ng-class="{'ce-list-item-active':subStage.isActive}"
                    ng-show="vm.isStageShown(stage)">
        <md-button flex
                   menu-close
                   ui-sref="{{subStage.link}}"
                   ng-click="vm.activateStage(subStage)"
                   nav-transition="none">
          <span class="ce-menu-button-text ce-menu-button-text-right">{{subStage.name}}</span>
        </md-button>
      </md-list-item>

      <md-divider></md-divider>

    </div>
  </div>

  <md-list-item layout>
    <md-button flex
               menu-close
               ng-click="vm.endQuiz()"
               class="md-warn"
               nav-transition="none">
      <span class="ce-menu-button-text">End Quiz</span>
    </md-button>
  </md-list-item>

</md-list>
